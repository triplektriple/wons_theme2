!function(e){UAELRegistrationForm={_checkPasswordStrength:function(e){var a=e.find("input[type=password]").val(),t=e.find(".uael-pass-wrapper"),s=e.find(".uael-pass-notice");switch(t.css("display","block"),uaelRegistration.wp_version?wp.passwordStrength.meter(a,wp.passwordStrength.userInputDisallowedList(),a):wp.passwordStrength.meter(a,wp.passwordStrength.userInputBlacklist(),a)){case-1:break;case 2:s.html(pwsL10n.bad).css("color","#e07757");break;case 3:s.html(pwsL10n.good).css("color","#f0ad4e");break;case 4:s.html(pwsL10n.strong).css("color","#5cb85c");break;case 5:s.html(pwsL10n.mismatch).css("color","#f0ad4e");break;default:s.html(pwsL10n.short).css("color","#d9534f")}},_printErrorMessages:function(e,a,t){a.next().hasClass("uael-register-field-message")||a.after('<span class="uael-register-field-message"><span class="uael-register-error">'+t+"</span></span>")},_submitForm:function(a,t,s){var r=uaelRegistration.ajax_url,i=!1,n=/\S+@\S+\.\S+/,o=/^[0-9.()\[\]+-]*$/,d=!1,l=s.find(".uael-registration-form"),c=l.attr("data-redirect-url"),u=a.find(".uael-registration-submit"),f=l.find(".form-field-password"),g=l.find(".uael-input-fields"),m=!0,p={},h=s.find(".uael-g-recaptcha-field"),v=s.find("input[name=uae-terms-checkbox]"),_=s.find(".elementor-field-subgroup");s.find(".acceptance-field").length>0&&(v.is(":checked")||(i=!0,_.next().show()),s.find(".elementor-acceptance-field").on("click",function(){s.find(".uael-register-acceptance-message").hide()})),p.page_id=t.data("page-id"),p.widget_id=s.data("id"),h.length>0&&(p.is_recaptcha_enabled="yes",p.recaptcha_token=l.find(".uael-g-recaptcha-response").val()),g.each(function(a){var t=e(this),r=t.find(".elementor-field"),l=r.attr("name"),c=t.hasClass("elementor-field-required"),u=r.val();r.length>0&&""!==u?("email"===l&&(u=e.trim(u),n.test(u)?r.siblings(".uael-register-field-message").hide():(i=!0,UAELRegistrationForm._printErrorMessages(s,r,uaelRegistration.invalid_mail))),"phone"===l&&(/\s/.test(u)?(i=!0,UAELRegistrationForm._printErrorMessages(s,r,uaelRegistration.error_phone)):o.test(u)?r.siblings(".uael-register-field-message").hide():(i=!0,UAELRegistrationForm._printErrorMessages(s,r,uaelRegistration.invalid_phone))),"password"===d&&(d=!0),"confirm_pass"===l?f.val()!==r.val()&&(i=!0,UAELRegistrationForm._printErrorMessages(s,r,uaelRegistration.pass_unmatch)):""!==u&&""!==l&&(p[l]=u)):r.length>0&&c&&(i=!0,UAELRegistrationForm._printErrorMessages(s,r,uaelRegistration.required)),r.hasClass("uael-regform-set-field")&&""!==u&&(m=!1,s.find(".uael-registration-message").addClass("error").text("Invalid Form!")),p[l]=u});const w=new CustomEvent("uael_on_trigger_registration_submission",{cancelable:!0,detail:{form:l,scope:s,user_data:p}});if(document.dispatchEvent(w)){if(m){p.auto_login=l.attr("data-auto_login"),p.send_email=l.attr("data-send_email"),p.send_email_password=0==d?"yes":"no";var b=s.find("input#uael-reg-form-nonce").val();if(s.find(".uael-registration-message").text("").removeClass("success error"),i)return!1;e.post(r,{action:"uael_register_user",data:p,nonce:b,method:"post",dataType:"json",beforeSend:function(){l.animate({opacity:"0.45"},500).addClass("uael-form-waiting"),u.hasClass("disabled")||i||(u.addClass("disabled"),u.append('<span class="uael-form-loader"></span>')),f.siblings(".uael-pass-wrapper").remove()}},function(e){h.length>0&&(recaptcha_id=h.attr("data-widgetid"),grecaptcha.reset(recaptcha_id),grecaptcha.execute(recaptcha_id)),!0===e.success?("yes"!==p.auto_login||void 0!==c&&""!==c?void 0!==c&&""!==c&&window.setTimeout(function(){window.location=c}):location.reload(),"yes"===l.attr("data-hide_form")?l.find(".elementor-form").remove():(u.find(".uael-form-loader").remove(),u.removeClass("disabled"),s.find(".uael-register-field-message").remove(),s.find(".elementor-form").trigger("reset")),l.animate({opacity:"1"},100).removeClass("uael-form-waiting"),"yes"!==l.attr("data-hide_form")&&($success_text=t.data("success-message"),s.find(".uael-registration-message").removeClass("error").addClass("success").text($success_text))):(l.animate({opacity:"1"},100).removeClass("uael-form-waiting"),u.find(".uael-form-loader").remove(),u.removeClass("disabled"),s.find(".uael-register-field-message").remove(),jQuery.each(e.error,function(e,a){var t=s.find(".form-field-"+e);UAELRegistrationForm._printErrorMessages(s,t,a)}),void 0===e.error&&($error_text=t.data("error-message"),s.find(".uael-registration-message").removeClass("success").addClass("error").text($error_text)))})}}else loader.classList.remove("uael-active")}},window.onLoadUAEReCaptcha=function(){var a,t=e(".uael-g-recaptcha-field");t.length>0&&t.each(function(){var t=e(this),s=t.attr("data-widgetid");void 0!==s&&!1!==s||(a=grecaptcha.render(e(this).attr("id"),{sitekey:t.data("sitekey"),callback:function(e){""!=e&&t.append(jQuery("<input>",{type:"hidden",value:e,class:"uael-g-recaptcha-response"}))}}),t.attr("data-widgetid",a))})};var a=function(e,a){if(void 0!==e){e.data("id");var t=e.find(".uael-register-submit"),s=e.find("input[type=password]"),r=e.find(".uael-registration-form"),i=(r.find(".elementor-form"),e.find("input[name=uae-terms-checkbox]"));if(i.on("focus",function(){e.find("span.checkbox-label").addClass("uael-rf-highlight-label")}),i.on("blur",function(){e.find("span.checkbox-label").removeClass("uael-rf-highlight-label")}),"yes"==r.data("strength-check")&&s.on("keyup",function(a){UAELRegistrationForm._checkPasswordStrength(e)}),s.on("focusout",function(a){""===e.find("input[type=password]").val()&&e.find(".uael-pass-wrapper").css("display","none")}),e.find(".elementor-field").on("keyup",function(e){a(this).siblings(".uael-register-field-message").remove()}),e.find(".uael-recaptcha-alert").length>0)t.addClass("uael-submit-disabled");else{var n=e.find(".uael-g-recaptcha-field");t.removeClass("uael-submit-disabled"),elementorFrontend.isEditMode()&&void 0==n.attr("data-widgetid")&&onLoadUAEReCaptcha(),n.length>0&&grecaptcha.ready(function(){recaptcha_id=n.attr("data-widgetid"),grecaptcha.execute(recaptcha_id)})}t.on("click",function(){event.preventDefault();var t=a(this);UAELRegistrationForm._submitForm(t,r,e)})}};e(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/uael-registration-form.default",a)})}(jQuery);